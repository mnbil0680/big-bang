<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ูุธุงู ุฅุฏุงุฑุฉ ุณูุฏุงุช ุงูุตุฑู ูุงููุจุถ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.10.5/cdn.min.js"
      defer
    ></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="bg-gray-100 text-gray-900">
    <script>
      window.SERVER_URI = "https://big-bang-production.up.railway.app";
    </script>
    <div x-data="voucherSystem()" class="container mx-auto my-8 px-4">
      <!-- ุฑุฃุณ ุงูุตูุญุฉ -->
      <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
        <div
          class="flex flex-col md:flex-row justify-between items-center mb-6"
        >
          <h1 class="text-3xl font-bold text-blue-800 mb-4 md:mb-0">
            ูุธุงู ุฅุฏุงุฑุฉ ุณูุฏุงุช ุงูุตุฑู ูุงููุจุถ
          </h1>
          <div class="flex space-x-4 rtl:space-x-reverse">
            <template x-for="(tab, index) in tabs" :key="index">
              <button
                @click="activeTab = tab.id"
                :class="{'bg-blue-600 text-white': activeTab === tab.id, 'bg-gray-200 hover:bg-gray-300 text-gray-800': activeTab !== tab.id}"
                class="px-4 py-2 rounded-lg transition duration-200 font-semibold flex items-center"
              >
                <span x-html="tab.icon" class="ml-2"></span>
                <span x-text="tab.name"></span>
              </button>
            </template>
          </div>
        </div>

        <!-- ุงูุฅุญุตุงุฆูุงุช ุงูุนุงูุฉ -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <h3 class="text-sm text-gray-600 mb-1">ุฅุฌูุงูู ุณูุฏุงุช ุงููุจุถ</h3>
            <p
              class="text-2xl font-bold text-blue-700"
              x-text="formatCurrency(totalReceipts)"
            ></p>
            <p
              class="text-xs text-gray-500 mt-1"
              x-text="'ุนุฏุฏ ุงูุณูุฏุงุช: ' + receiptVouchers.length"
            ></p>
          </div>
          <div class="bg-green-50 border border-green-200 rounded-lg p-4">
            <h3 class="text-sm text-gray-600 mb-1">ุฅุฌูุงูู ุณูุฏุงุช ุงูุตุฑู</h3>
            <p
              class="text-2xl font-bold text-green-700"
              x-text="formatCurrency(totalPayments)"
            ></p>
            <p
              class="text-xs text-gray-500 mt-1"
              x-text="'ุนุฏุฏ ุงูุณูุฏุงุช: ' + paymentVouchers.length"
            ></p>
          </div>
          <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
            <h3 class="text-sm text-gray-600 mb-1">ุงูุฑุตูุฏ ุงูููุฏู</h3>
            <p
              class="text-2xl font-bold"
              :class="netBalance >= 0 ? 'text-purple-700' : 'text-red-700'"
              x-text="formatCurrency(netBalance)"
            ></p>
            <p class="text-xs text-gray-500 mt-1">ุงููุฑู ุจูู ุงููุจุถ ูุงูุตุฑู</p>
          </div>
          <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
            <h3 class="text-sm text-gray-600 mb-1">ุณูุฏุงุช ูุฐุง ุงูุดูุฑ</h3>
            <p
              class="text-2xl font-bold text-yellow-700"
              x-text="formatCurrency(currentMonthTotal)"
            ></p>
            <p
              class="text-xs text-gray-500 mt-1"
              x-text="'ุนุฏุฏ ุงูุณูุฏุงุช: ' + currentMonthCount"
            ></p>
          </div>
        </div>
      </div>

      <!-- ูุญุชูู ุงูุชุจููุจุงุช -->
      <div class="bg-white rounded-lg shadow-lg p-6">
        <!-- ุชุจููุจ ุฅูุดุงุก ุณูุฏ ุฌุฏูุฏ -->
        <div x-show="activeTab === 'new'" x-transition>
          <h2
            class="text-xl font-bold mb-6 pb-2 border-b border-gray-300 flex items-center"
          >
            <span class="ml-2">๐งพ</span>
            <span>ุฅูุดุงุก ุณูุฏ ุฌุฏูุฏ</span>
          </h2>

          <form @submit.prevent="saveVoucher">
            <div
              class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"
            >
              <div>
                <label class="block text-sm font-medium mb-1">ููุน ุงูุณูุฏ</label>
                <div class="flex space-x-4 rtl:space-x-reverse">
                  <label class="inline-flex items-center">
                    <input
                      type="radio"
                      x-model="newVoucher.type"
                      value="ูุจุถ"
                      class="form-radio h-5 w-5 text-blue-600"
                      required
                    />
                    <span class="mr-2">ุณูุฏ ูุจุถ</span>
                  </label>
                  <label class="inline-flex items-center">
                    <input
                      type="radio"
                      x-model="newVoucher.type"
                      value="ุตุฑู"
                      class="form-radio h-5 w-5 text-green-600"
                      required
                    />
                    <span class="mr-2">ุณูุฏ ุตุฑู</span>
                  </label>
                </div>
              </div>

              <div class="relative">
                <label class="block text-sm font-medium mb-1">ุฑูู ุงูุณูุฏ</label>
                <div class="relative">
                  <input
                    type="text"
                    x-model="newVoucher.voucherNumber"
                    class="w-full border rounded-lg p-2 pr-10"
                    required
                  />
                  <button
                    type="button"
                    @click="generateNewVoucherNumber()"
                    class="absolute inset-y-0 right-2 flex items-center text-gray-500 hover:text-blue-600"
                  >
                    ๐
                  </button>
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium mb-1">ุงูุชุงุฑูุฎ</label>
                <input
                  type="date"
                  x-model="newVoucher.date"
                  class="w-full border rounded-lg p-2"
                  required
                />
              </div>

              <div class="md:col-span-2">
                <label
                  class="block text-sm font-medium mb-1"
                  x-text="newVoucher.type === 'ูุจุถ' ? 'ุงุณุชูููุง ูู ุงูุณูุฏ/ุฉ:' : 'ุตุฑููุง ููุณูุฏ/ุฉ:'"
                ></label>
                <input
                  type="text"
                  x-model="newVoucher.entity"
                  class="w-full border rounded-lg p-2"
                  required
                />
              </div>

              <div>
                <label class="block text-sm font-medium mb-1">ุงููุจูุบ</label>
                <input
                  type="number"
                  step="0.01"
                  x-model="newVoucher.amount"
                  class="w-full border rounded-lg p-2"
                  required
                />
              </div>

              <div class="md:col-span-2">
                <label class="block text-sm font-medium mb-1"
                  >ุงููุจูุบ ูุชุงุจุฉู</label
                >
                <input
                  type="text"
                  x-model="newVoucher.amountInWords"
                  class="w-full border rounded-lg p-2"
                  required
                />
              </div>

              <div class="md:col-span-2">
                <label class="block text-sm font-medium mb-1">ูุฐูู ุนู</label>
                <input
                  type="text"
                  x-model="newVoucher.description"
                  class="w-full border rounded-lg p-2"
                  required
                />
              </div>

              <div>
                <label class="block text-sm font-medium mb-1"
                  >ุทุฑููุฉ ุงูุฏูุน</label
                >
                <select
                  x-model="newVoucher.paymentMethod"
                  class="w-full border rounded-lg p-2"
                  required
                >
                  <option value="">-- ุงุฎุชุฑ ุทุฑููุฉ ุงูุฏูุน --</option>
                  <option value="ููุฏุงู">ููุฏุงู</option>
                  <option value="ุดูู">ุดูู</option>
                  <option value="ุชุญููู ุจููู">ุชุญููู ุจููู</option>
                  <option value="ุจุทุงูุฉ ุงุฆุชูุงู">ุจุทุงูุฉ ุงุฆุชูุงู</option>
                </select>
              </div>

              <!-- ูุนูููุงุช ุงูุดูู (ุชุธูุฑ ููุท ุนูุฏ ุงุฎุชูุงุฑ ุดูู) -->
              <div
                x-show="newVoucher.paymentMethod === 'ุดูู'"
                class="lg:col-span-3 grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border border-gray-200 rounded-lg"
              >
                <div>
                  <label class="block text-sm font-medium mb-1"
                    >ุฑูู ุงูุดูู</label
                  >
                  <input
                    type="text"
                    x-model="newVoucher.checkNumber"
                    class="w-full border rounded-lg p-2"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">ุงูุจูู</label>
                  <input
                    type="text"
                    x-model="newVoucher.bank"
                    class="w-full border rounded-lg p-2"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1"
                    >ุชุงุฑูุฎ ุงูุดูู</label
                  >
                  <input
                    type="date"
                    x-model="newVoucher.checkDate"
                    class="w-full border rounded-lg p-2"
                  />
                </div>
              </div>

              <!-- ูุนูููุงุช ุงูุชุญููู ุงูุจููู (ุชุธูุฑ ููุท ุนูุฏ ุงุฎุชูุงุฑ ุชุญููู ุจููู) -->
              <div
                x-show="newVoucher.paymentMethod === 'ุชุญููู ุจููู'"
                class="lg:col-span-3 grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border border-gray-200 rounded-lg"
              >
                <div>
                  <label class="block text-sm font-medium mb-1"
                    >ุฑูู ุงูุชุญููู</label
                  >
                  <input
                    type="text"
                    x-model="newVoucher.transferNumber"
                    class="w-full border rounded-lg p-2"
                  />
                </div>
                <div>
                  <label class="block text-sm font-medium mb-1">ุงูุจูู</label>
                  <input
                    type="text"
                    x-model="newVoucher.bank"
                    class="w-full border rounded-lg p-2"
                  />
                </div>
              </div>
            </div>

            <div class="flex justify-end space-x-4 rtl:space-x-reverse">
              <button
                type="button"
                @click="resetForm"
                class="px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition duration-200"
              >
                ุฅุนุงุฏุฉ ุชุนููู
              </button>
              <button
                type="button"
                @click="previewVoucher"
                class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition duration-200"
              >
                ูุนุงููุฉ ุงูุณูุฏ
              </button>
              <button
                type="submit"
                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200"
              >
                ุญูุธ ุงูุณูุฏ
              </button>
            </div>
          </form>
        </div>

        <!-- ุชุจููุจ ุนุฑุถ ุงูุณูุฏุงุช -->
        <div x-show="activeTab === 'list'" x-transition>
          <h2
            class="text-xl font-bold mb-6 pb-2 border-b border-gray-300 flex items-center"
          >
            <span class="ml-2">๐</span>
            <span>ูุงุฆูุฉ ุงูุณูุฏุงุช</span>
          </h2>

          <!-- ุฃุฏูุงุช ุงูุชุตููุฉ -->
          <div class="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
              <div>
                <label class="block text-sm font-medium mb-1">ููุน ุงูุณูุฏ</label>
                <select
                  x-model="filters.type"
                  class="w-full border rounded-lg p-2"
                  @change="applyFilters()"
                >
                  <option value="">ุงููู</option>
                  <option value="ูุจุถ">ุณูุฏุงุช ุงููุจุถ</option>
                  <option value="ุตุฑู">ุณูุฏุงุช ุงูุตุฑู</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium mb-1">ูู ุชุงุฑูุฎ</label>
                <input
                  type="date"
                  x-model="filters.fromDate"
                  class="w-full border rounded-lg p-2"
                  @change="applyFilters()"
                />
              </div>
              <div>
                <label class="block text-sm font-medium mb-1">ุฅูู ุชุงุฑูุฎ</label>
                <input
                  type="date"
                  x-model="filters.toDate"
                  class="w-full border rounded-lg p-2"
                  @change="applyFilters()"
                />
              </div>
              <div>
                <label class="block text-sm font-medium mb-1">ุจุญุซ</label>
                <input
                  type="text"
                  x-model="filters.searchTerm"
                  placeholder="ุฑูู ุงูุณูุฏุ ุงูุงุณูุ ุงููุตู..."
                  class="w-full border rounded-lg p-2"
                  @input="applyFilters()"
                />
              </div>
            </div>
            <div class="mt-4 flex justify-between">
              <button
                @click="clearFilters"
                class="px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition duration-200"
              >
                ูุณุญ ุงูุชุตููุฉ
              </button>
              <div class="space-x-2 rtl:space-x-reverse">
                <button
                  @click="exportToExcel"
                  class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition duration-200"
                >
                  ุชุตุฏูุฑ Excel
                </button>
                <button
                  @click="printCurrentList"
                  class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition duration-200"
                >
                  ุทุจุงุนุฉ ุงููุงุฆูุฉ
                </button>
              </div>
            </div>
          </div>

          <!-- ุฌุฏูู ุงูุณูุฏุงุช -->
          <div class="overflow-x-auto">
            <table
              class="min-w-full bg-white border border-gray-300 rounded-lg"
            >
              <thead>
                <tr class="bg-gray-100">
                  <th class="py-2 px-4 border-b text-right">#</th>
                  <th class="py-2 px-4 border-b text-right">ุงูููุน</th>
                  <th class="py-2 px-4 border-b text-right">ุฑูู ุงูุณูุฏ</th>
                  <th class="py-2 px-4 border-b text-right">ุงูุชุงุฑูุฎ</th>
                  <th class="py-2 px-4 border-b text-right">ุงูุงุณู</th>
                  <th class="py-2 px-4 border-b text-right">ุงููุจูุบ</th>
                  <th class="py-2 px-4 border-b text-right">ุงููุตู</th>
                  <th class="py-2 px-4 border-b text-right no-print">
                    ุงูุฅุฌุฑุงุกุงุช
                  </th>
                </tr>
              </thead>
              <tbody>
                <template x-if="filteredVouchers.length > 0">
                  <template
                    x-for="(voucher, index) in filteredVouchers"
                    :key="index"
                  >
                    <tr :class="index % 2 === 0 ? 'bg-white' : 'bg-gray-50'">
                      <td class="py-2 px-4 border-b" x-text="index + 1"></td>
                      <td class="py-2 px-4 border-b">
                        <span
                          :class="voucher.type === 'ุตุฑู' ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800'"
                          class="px-2 py-1 rounded-full text-xs font-medium"
                        >
                          <span x-text="voucher.type"></span>
                        </span>
                      </td>
                      <td
                        class="py-2 px-4 border-b"
                        x-text="voucher.voucherNumber"
                      ></td>
                      <td
                        class="py-2 px-4 border-b"
                        x-text="formatDate(voucher.date)"
                      ></td>
                      <td
                        class="py-2 px-4 border-b"
                        x-text="voucher.entity"
                      ></td>
                      <td
                        class="py-2 px-4 border-b font-semibold"
                        x-text="formatCurrency(voucher.amount)"
                      ></td>
                      <td
                        class="py-2 px-4 border-b"
                        x-text="voucher.description"
                      ></td>
                      <td class="py-2 px-4 border-b no-print">
                        <div class="flex space-x-2 rtl:space-x-reverse">
                          <button
                            @click="viewVoucher(voucher)"
                            class="p-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200"
                          >
                            <span>๐๏ธ</span>
                          </button>
                          <button
                            @click="printVoucher(voucher)"
                            class="p-1 bg-purple-100 text-purple-700 rounded hover:bg-purple-200"
                          >
                            <span>๐จ๏ธ</span>
                          </button>
                          <button
                            @click="deleteVoucher(voucher)"
                            class="p-1 bg-red-100 text-red-700 rounded hover:bg-red-200"
                          >
                            <span>๐๏ธ</span>
                          </button>
                        </div>
                      </td>
                    </tr>
                  </template>
                </template>
                <template x-if="filteredVouchers.length === 0">
                  <tr>
                    <td colspan="8" class="py-4 text-center text-gray-500">
                      ูุง ุชูุฌุฏ ุณูุฏุงุช ูุชุทุงุจูุฉ ูุน ูุนุงููุฑ ุงูุจุญุซ
                    </td>
                  </tr>
                </template>
              </tbody>
              <tfoot>
                <tr class="bg-gray-100 font-bold">
                  <td colspan="5" class="py-2 px-4 border-t text-left">
                    ุงูุฅุฌูุงูู:
                  </td>
                  <td
                    class="py-2 px-4 border-t"
                    x-text="formatCurrency(filteredTotal)"
                  ></td>
                  <td colspan="2" class="py-2 px-4 border-t"></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>

        <!-- ุชุจููุจ ุงูุชูุงุฑูุฑ -->
        <div x-show="activeTab === 'reports'" x-transition>
          <h2
            class="text-xl font-bold mb-6 pb-2 border-b border-gray-300 flex items-center"
          >
            <span class="ml-2">๐</span>
            <span>ุงูุชูุงุฑูุฑ ุงููุงููุฉ</span>
          </h2>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <!-- ุชูุฑูุฑ ุชูุฒูุน ุงูุณูุฏุงุช ุญุณุจ ุงูููุน -->
            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow">
              <h3 class="text-lg font-semibold mb-4">
                ุชูุฒูุน ุณูุฏุงุช ุงููุจุถ ูุงูุตุฑู
              </h3>
              <div class="h-64">
                <canvas id="voucherTypeChart"></canvas>
              </div>
            </div>

            <!-- ุชูุฑูุฑ ุงููุตุฑููุงุช ุงูุดูุฑูุฉ -->
            <div class="bg-white p-4 rounded-lg border border-gray-200 shadow">
              <h3 class="text-lg font-semibold mb-4">ุญุฑูุฉ ุงูุณูุฏุงุช ุงูุดูุฑูุฉ</h3>
              <div class="h-64">
                <canvas id="monthlyChart"></canvas>
              </div>
            </div>
          </div>

          <div
            class="bg-white p-4 rounded-lg border border-gray-200 shadow mb-6"
          >
            <h3 class="text-lg font-semibold mb-4">
              ุชุญููู ุงูุณูุฏุงุช ุญุณุจ ุทุฑููุฉ ุงูุฏูุน
            </h3>
            <div class="h-64">
              <canvas id="paymentMethodChart"></canvas>
            </div>
          </div>

          <div class="bg-white p-4 rounded-lg border border-gray-200 shadow">
            <h3 class="text-lg font-semibold mb-4">ุงูุฑุตูุฏ ุงูุชุฑุงููู</h3>
            <div class="h-64">
              <canvas id="balanceChart"></canvas>
            </div>
          </div>
        </div>

        <!-- ุชุจููุจ ุงูุฅุนุฏุงุฏุงุช -->
        <div x-show="activeTab === 'settings'" x-transition>
          <h2
            class="text-xl font-bold mb-6 pb-2 border-b border-gray-300 flex items-center"
          >
            <span class="ml-2">โ๏ธ</span>
            <span>ุฅุนุฏุงุฏุงุช ุงููุธุงู</span>
          </h2>

          <form @submit.prevent="saveSettings">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div
                class="bg-white p-6 rounded-lg border border-gray-200 shadow"
              >
                <h3 class="text-lg font-semibold mb-4">ูุนูููุงุช ุงูุดุฑูุฉ</h3>
                <div class="mb-4">
                  <label class="block text-sm font-medium mb-1"
                    >ุงุณู ุงูุดุฑูุฉ</label
                  >
                  <input
                    type="text"
                    x-model="settings.companyName"
                    class="w-full border rounded-lg p-2"
                  />
                </div>
                <div class="mb-4">
                  <label class="block text-sm font-medium mb-1"
                    >ุดุนุงุฑ ุงูุดุฑูุฉ (URL)</label
                  >
                  <input
                    type="text"
                    x-model="settings.companyLogo"
                    class="w-full border rounded-lg p-2"
                  />
                </div>
                <div class="mb-4">
                  <label class="block text-sm font-medium mb-1">ุงูุนููุงู</label>
                  <textarea
                    x-model="settings.address"
                    class="w-full border rounded-lg p-2"
                    rows="2"
                  ></textarea>
                </div>
                <div class="mb-4">
                  <label class="block text-sm font-medium mb-1"
                    >ุฑูู ุงููุงุชู</label
                  >
                  <input
                    type="text"
                    x-model="settings.phone"
                    class="w-full border rounded-lg p-2"
                  />
                </div>
                <div class="mb-4">
                  <label class="block text-sm font-medium mb-1"
                    >ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label
                  >
                  <input
                    type="email"
                    x-model="settings.email"
                    class="w-full border rounded-lg p-2"
                  />
                </div>
              </div>
              <div
                class="bg-white p-6 rounded-lg border border-gray-200 shadow"
              >
                <h3 class="text-lg font-semibold mb-4">ุฅุนุฏุงุฏุงุช ุงููุธุงู</h3>
                <div class="mb-4">
                  <label class="block text-sm font-medium mb-1">ุงูุนููุฉ</label>
                  <select
                    x-model="settings.currency"
                    class="w-full border rounded-lg p-2"
                  >
                    <option value="ุฑูุงู">ุฑูุงู ุณุนูุฏู</option>
                    <option value="ุฏุฑูู">ุฏุฑูู ุฅูุงุฑุงุชู</option>
                    <option value="ุฏููุงุฑ">ุฏููุงุฑ ูููุชู</option>
                    <option value="ุฏููุงุฑ">ุฏููุงุฑ ุฃูุฑููู</option>
                    <option value="ููุฑู">ููุฑู</option>
                  </select>
                </div>
                <div class="mb-4">
                  <label class="block text-sm font-medium mb-1"
                    >ุงูุจุงุฏุฆุฉ ูุฃุฑูุงู ุณูุฏุงุช ุงููุจุถ</label
                  >
                  <input
                    type="text"
                    x-model="settings.receiptPrefix"
                    class="w-full border rounded-lg p-2"
                    placeholder="ูุซุงู: REC-"
                  />
                </div>
                <div class="mb-4">
                  <label class="block text-sm font-medium mb-1"
                    >ุงูุจุงุฏุฆุฉ ูุฃุฑูุงู ุณูุฏุงุช ุงูุตุฑู</label
                  >
                  <input
                    type="text"
                    x-model="settings.paymentPrefix"
                    class="w-full border rounded-lg p-2"
                    placeholder="ูุซุงู: PAY-"
                  />
                </div>
                <div class="mb-4">
                  <label class="block text-sm font-medium mb-1"
                    >ุชูููุน ุงููุณุชูู (URL)</label
                  >
                  <input
                    type="text"
                    x-model="settings.receiverSignature"
                    class="w-full border rounded-lg p-2"
                  />
                </div>
                <div class="mb-4">
                  <label class="block text-sm font-medium mb-1"
                    >ุชูููุน ุงููุญุงุณุจ (URL)</label
                  >
                  <input
                    type="text"
                    x-model="settings.accountantSignature"
                    class="w-full border rounded-lg p-2"
                  />
                </div>
              </div>
            </div>
            <div class="mt-6 flex justify-end">
              <button
                type="submit"
                class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200"
              >
                ุญูุธ ุงูุฅุนุฏุงุฏุงุช
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- ูุงูุฐุฉ ูุนุงููุฉ ุงูุณูุฏ -->
      <div
        x-show="isPreview"
        x-cloak
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"
        @click="isPreview = false"
      >
        <div
          class="bg-white rounded-lg shadow-lg max-w-3xl w-full relative max-h-[90vh] overflow-y-auto"
          @click.stop
        >
          <button
            @click="isPreview = false"
            class="absolute top-2 left-2 text-gray-600 hover:text-red-600 p-2"
          >
            โ
          </button>
          <div class="p-6 voucher-print" id="preview-voucher">
            <div class="receipt-header text-center mb-6">
              <h2
                class="text-xl font-bold"
                x-text="previewVoucher.type === 'ูุจุถ' ? 'ุณูุฏ ูุจุถ' : 'ุณูุฏ ุตุฑู'"
              ></h2>
              <div
                x-text="'ุฑูู ุงูุณูุฏ: ' + previewVoucher.voucherNumber"
                class="text-sm"
              ></div>
              <div
                x-text="'ุงูุชุงุฑูุฎ: ' + formatDate(previewVoucher.date)"
                class="text-sm"
              ></div>
            </div>
            <div class="mb-6">
              <div class="field-row">
                <div
                  class="field-label"
                  x-text="previewVoucher.type === 'ูุจุถ' ? 'ุงุณุชูููุง ูู ุงูุณูุฏ/ุฉ:' : 'ุตุฑููุง ููุณูุฏ/ุฉ:'"
                ></div>
                <div x-text="previewVoucher.entity"></div>
              </div>
              <div class="field-row">
                <div class="field-label">ูุจูุบ ููุฏุฑู:</div>
                <div x-text="formatCurrency(previewVoucher.amount)"></div>
              </div>
              <div class="field-row">
                <div class="field-label">ุงููุจูุบ ูุชุงุจุฉู:</div>
                <div x-text="previewVoucher.amountInWords"></div>
              </div>
              <div class="field-row">
                <div class="field-label">ูุฐูู ุนู:</div>
                <div x-text="previewVoucher.description"></div>
              </div>
              <div class="field-row">
                <div class="field-label">ุทุฑููุฉ ุงูุฏูุน:</div>
                <div x-text="previewVoucher.paymentMethod"></div>
              </div>
              <template x-if="previewVoucher.paymentMethod === 'ุดูู'">
                <div>
                  <div class="field-row">
                    <div class="field-label">ุฑูู ุงูุดูู:</div>
                    <div x-text="previewVoucher.checkNumber"></div>
                  </div>
                  <div class="field-row">
                    <div class="field-label">ุงูุจูู:</div>
                    <div x-text="previewVoucher.bank"></div>
                  </div>
                  <div class="field-row">
                    <div class="field-label">ุชุงุฑูุฎ ุงูุดูู:</div>
                    <div x-text="formatDate(previewVoucher.checkDate)"></div>
                  </div>
                </div>
              </template>
              <template x-if="previewVoucher.paymentMethod === 'ุชุญููู ุจููู'">
                <div>
                  <div class="field-row">
                    <div class="field-label">ุฑูู ุงูุชุญููู:</div>
                    <div x-text="previewVoucher.transferNumber"></div>
                  </div>
                  <div class="field-row">
                    <div class="field-label">ุงูุจูู:</div>
                    <div x-text="previewVoucher.bank"></div>
                  </div>
                </div>
              </template>
            </div>
            <div class="signature-area">
              <div class="signature-box">
                <div class="signature-line"></div>
                <div>ุงููุณุชูู</div>
              </div>
              <div class="signature-box">
                <div class="signature-line"></div>
                <div>ุงููุญุงุณุจ</div>
              </div>
              <div class="signature-box">
                <div class="signature-line"></div>
                <div>ุงููุฏูุฑ</div>
              </div>
            </div>
          </div>
          <div
            class="p-4 border-t flex justify-end space-x-4 rtl:space-x-reverse"
          >
            <button
              @click="isPreview = false"
              class="px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition duration-200"
            >
              ุฅุบูุงู
            </button>
            <button
              @click="printPreview()"
              class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-200"
            >
              ุทุจุงุนุฉ
            </button>
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.1/gsap.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
